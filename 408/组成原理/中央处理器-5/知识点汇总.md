




# **核心框架：CPU = 厨房 + 厨师长 + 菜谱**

#### **⭐⭐⭐⭐⭐ 五星核心：指令执行过程（做一道菜的完整流程）**

你必须能清晰描述这三个阶段的**操作**和**访存次数**。

1.  **取指周期（去菜谱库拿菜谱）**
    *   **操作**：
        *   **PC -> MAR**：厨师长（**程序计数器PC**）告诉拿菜谱的地址。
        *   **CPU发"读"信号**：厨师长下令去拿。
        *   **（内存）-> MDR -> IR**：从菜谱库（**内存**）拿到菜谱（指令），交给指令员（**指令寄存器IR**）。
        *   **PC + 1 -> PC**：厨师长自动翻到下一页。
    *   **特点**：这是**公共操作**，任何指令的第一步都是这个。
    *   **访存**：1次（取指令）。

2.  **间址周期（处理复杂的食材地址）**
    *   **操作**：菜谱上写的是「去A号柜子看纸条」，纸条上才是真正的食材位置。这个「看纸条」的过程就是间址周期。
    *   **访存**：1次（取有效地址）。**注意：不是所有指令都有这个周期！**

3.  **执行周期（动手做菜）**
    *   **数据传送类（MOV）**：把食材从一个地方搬到另一个地方。
    *   **运算类（ADD）**：把两种食材混合加工。主要在**ALU**中完成。
    *   **控制流类（JMP）**：厨师长直接跳到指定页的菜谱（修改**PC**）。
    *   **访存**：0次、1次或多次，取决于指令。

---

### **⭐⭐⭐⭐⭐ 五星核心：数据通路（厨房的布局和动线）**

数据通路就是数据在CPU内部**流动的路径**。

*   **CPU内部单总线**：**最常考！** 厨房只有一条主过道，所有设备都连着它。成本低，但同一时间只能有两个人走动，效率低。
*   **专用数据通路**：厨房有专门的「送菜道」、「送盘子道」。速度快，但硬件复杂。

**大题必考：画出数据通路并描述指令执行过程**
*   给你一条指令（如 `ADD (R0), R1`），你要能在图中画出数据流动路径，并写出每一步的**微操作**。
*   **关键部件**：
    *   **ALU**：运算核心。
    *   **通用寄存器组**：存放常用数据。
    *   **暂存器**：临时存放数据，对程序员透明。
    *   **MAR**：地址总线的「门卫」。
    *   **MDR**：数据总线的「门卫」。

---

### **⭐⭐⭐⭐⭐ 五星核心：控制器（厨房的总指挥系统）**

控制器负责根据「菜谱」（指令）产生具体的「操作命令」（微操作控制信号）。

**两种主要设计方式（必考区别）**：

| 对比项 | **硬布线控制器（硬件大厨）** | **微程序控制器（菜谱库管理员）** |
| :--- | :--- | :--- |
| **工作原理** | 用**逻辑电路**直接生成信号，速度快。 | 将信号编成「微指令」存放在**控制存储器**中，按需查表。 |
| **执行速度** | **快**（RISC处理器常用） | **慢** |
| **灵活性** | 差，电路固定后难修改。 | **好**，修改微程序即可升级。 |
| **易实现性** | 复杂 | 简单、规整（CISC处理器常用） |

---

### **⭐⭐⭐⭐ 四星重点：流水线技术（提高效率的流水线）**

为了不让厨房闲着，我们把做菜流程工业化：

**取指 -> 译码 -> 执行 -> 访存 -> 写回**

**三大问题（核心考点）**：
1.  **资源冲突**：两条指令同时要用一个灶台（功能部件）。解决办法：**增加资源**或**停顿**。
2.  **数据冲突（最常见）**：
    *   **情况**：前一条菜还没出锅（没写回），后一条菜就要用它。
    *   **解决办法**：
        *   **停顿**：让后面的指令等一等。
        *   **数据旁路**：**最重要！** 直接从灶台（ALU输出）端到备菜台（ALU输入），省去出锅装盘的步骤。
3.  **控制冲突**：遇到 `if...else`（跳转指令），不知道下一步该做哪道菜。
    *   **解决办法**：**分支预测**，猜一下接下来要做哪道菜，先准备着。

**性能计算（必考）**：
*   流水线周期：`Δt = 最慢一段操作的时间`
*   **n条指令执行时间**：`建立时间 + (n-1)*流水线周期 = k*Δt + (n-1)*Δt`
*   加速比：`S = 不用流水线时间 / 用流水线时间`

---

### **⭐⭐⭐ 三星理解：中断系统（处理紧急订单）**

*   **作用**：允许CPU暂停当前菜，先去处理更紧急的订单（如用户输入、磁盘读写完成），处理完再回来。
*   **流程**：**中断请求 -> 中断判优 -> 中断响应 -> 中断处理 -> 中断返回**
*   **考点**：**中断隐指令**（不是程序，而是硬件自动完成的操作，如保存PC、关中断等）。

### **总结与备考策略**

1.  **抓大放小**：**数据通路、控制器、流水线**是重中之重，投入70%精力。
2.  **动手画图**：对于数据通路，一定要自己动手画一遍单总线结构，并标注一条指令的完整数据流。
3.  **理解而非死记**：理解「为什么会有数据冲突？」「数据旁路为什么能解决它？」，这样无论题目如何变化都能应对。
4.  **真题为王**：CPU的大题题型相对固定，多做真题，总结答题套路。

掌握这些，CPU这章你就拿下了！
<!--stackedit_data:
eyJoaXN0b3J5IjpbMTQ1MjM3NDk5MCw0NDA5MDU2MTldfQ==
-->