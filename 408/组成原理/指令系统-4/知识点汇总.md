



# **第四章：指令系统 - 知识框架总览**

指令系统的核心是 **“CPU能识别和执行的所有指令的集合”** 。它规定了计算机的基本功能、硬件设计思路和编程模式。

---

### **一、 指令系统的基本概念**

#### **1. 指令的基本格式**
一条指令通常包含两部分：**操作码** + **地址码**

*   **操作码**：指明指令要执行的操作，如加、减、跳转等。
    *   **长度**：固定长度（易于译码，RISC采用）或 可变长度（节省空间，CISC采用）。
*   **地址码**：指明操作数的地址。可以是**寄存器地址**或**存储器地址**。

#### **2. 根据地址码数量分类（重要选择题考点）**
*   **零地址指令**：`OP`
    *   格式：只有操作码，没有显式地址码。
    *   **操作数来源**：
        1.  不需要操作数，如空操作`NOP`、停机`HLT`。
        2.  操作数隐含在堆栈中，如`PUSH`, `POP`。
*   **一地址指令**：`OP A1`
    *   格式：一个显式地址码。
    *   **操作数来源**：
        1.  单操作数：如`INC A1`（A1自增1），`NOT A1`（A1取反）。
        2.  双操作数：其中一个操作数**隐含**在**累加器ACC**中。格式为 `(ACC) OP (A1) -> ACC`。这是早期计算机非常重要的设计。
*   **二地址指令**：`OP A1 A2`
    *   格式：两个显式地址码。
    *   **操作**：`(A1) OP (A2) -> A1`。结果存回A1地址，A1原来的内容被覆盖。这是最常见的格式之一。
*   **三地址指令**：`OP A1 A2 A3`
    *   格式：三个显式地址码。
    *   **操作**：`(A1) OP (A2) -> A3`。结果存到第三个地址，A1和A2的原始数据都被保留。便于编程，但指令字较长。

**难点与易错点**：
*   准确理解**一地址指令**中隐含的**ACC**的作用。
*   区分不同地址指令数的适用场景和优缺点。

---

### **二、 操作数的类型、存储与寻址方式（重中之重）**

这是本章最核心、最易出综合题的部分。

#### **1. 操作数类型**
*   **地址**：本质也是无符号整数。
*   **数字**：定点数、浮点数。
*   **字符**：ASCII码。
*   **逻辑数**：逻辑运算。

#### **2. 操作数的存储**
*   **存放在哪儿？**
    *   **堆栈**：零地址指令，操作速度慢。
    *   **累加器ACC**：一地址指令，对累加器依赖严重。
    *   **通用寄存器组**：**现代计算机最主流的方式**，速度快，指令字长短。
    *   **主存储器**：速度最慢，但容量最大。

#### **3. 寻址方式（核心中的核心，必考）**
寻址方式是指 **“确定本条指令的操作数地址”** 以及 **“下一条要执行的指令的地址”** 的方法。

**指令寻址**：
*   **顺序寻址**：通过**程序计数器PC + 1**（此处的“1”指一个指令字长）自动形成下一条指令地址。
*   **跳跃寻址**：通过转移类指令（如`JMP`）改变PC的值，实现循环、分支。

**数据寻址**：种类繁多，需要深刻理解其**有效地址EA的计算方法**。

| 寻址方式 | 助记符 | **有效地址EA的计算** | **特点与用途** | **访存次数** |
| :--- | :--- | :--- | :--- | :--- |
| **隐含寻址** | | 操作数隐含在指定寄存器（如ACC）中 | 指令短，需专用寄存器 | 0次 |
| **立即（数）寻址** | `OP #100` | **操作数 = 指令中的立即数本身** | **指令执行速度最快**，操作数获取不访存 | **0次** |
| **直接寻址** | `OP A` | **EA = A** | 简单，但地址范围受指令字长限制 | 1次 |
| **间接寻址** | `OP (A)` | **EA = (A)** | 可寻址范围大，但**执行速度慢** | **≥2次** |
| **寄存器寻址** | `OP R1` | **操作数 = (R1)** | **指令字短，执行速度快** | 0次 |
| **寄存器间接寻址**| `OP (R1)` | **EA = (R1)** | 便于编制循环程序 | 1次 |
| **相对寻址** | `OP A` | **EA = (PC) + A** | **用于转移指令、程序浮动** | 1次 |
| **基址寻址** | `OP A` | **EA = (BR) + A** | **面向系统**，用于多道程序，解决程序定位问题 | 1次 |
| **变址寻址** | `OP A(X)` | **EA = (IX) + A** | **面向用户**，用于处理数组、循环（A为基地址，IX为索引） | 1次 |
| **堆栈寻址** | `PUSH A` | 操作数在堆栈顶（由SP指针隐含指定） | 支持零地址指令 | 多次 |

**基址寻址 vs 变址寻址（高频辨析点）**：
*   **基址寻址**：
    *   **基址寄存器BR**内容由**操作系统**管理，在程序运行期间**不可变**。
    *   **形式地址A**可变。
    *   **主要解决**：程序在主存中的**重定位**问题。
*   **变址寻址**：
    *   **变址寄存器IX**内容由**用户**管理，在程序运行期间**可变**。
    *   **形式地址A**作为**基地址**，是固定值。
    *   **主要解决**：处理**数组、字符串**等数据结构的循环访问问题。

**复合寻址**：以上方式的组合，如基址+变址寻址：`EA = (BR) + (IX) + A`。

**难点与易错点**：
*   **计算访存次数**：
    *   **取指令**：必访存1次。
    *   **取操作数**：根据寻址方式判断。
        *   立即寻址、寄存器寻址：**0次**。
        *   直接寻址、寄存器间接寻址、相对/基址/变址寻址：**1次**。
        *   一次间接寻址：**2次**（第一次取地址，第二次取数据）。
*   **综合应用**：给定一段指令序列和初始状态（PC、寄存器、内存内容），要求分析某条指令执行后，目标操作数的值或EA是多少。这需要你非常熟练地掌握每种寻址方式的计算公式。

---

### **三、 CISC和RISC（基本概念与对比）**

#### **1. CISC**
*   **基本思想**：指令系统复杂，指令数目多，寻址方式丰富。
*   **特点**：
    *   指令长度不固定，指令格式多，寻址方式多。
    *   绝大多数指令需要多个时钟周期才能完成。
    *   **控制器设计**：采用**微程序控制**实现复杂指令。
    *   难以使用流水线技术，编译优化困难。
*   **代表**：x86架构。

#### **2. RISC**
*   **基本思想**：指令系统精简，只保留使用频率高的简单指令。
*   **特点**：
    *   指令长度固定，指令格式种类少，寻址方式少。
    *   **只有Load/Store指令可以访存**，其他指令操作都在寄存器之间。
    *   采用**硬布线控制器**，大部分指令在**单周期**内完成。
    *   便于使用**流水线技术**，编译器优化效果好。
*   **代表**：ARM, MIPS, RISC-V。

**对比表格（重要选择题考点）**：

| 对比项 | CISC | RISC |
| :--- | :--- | :--- |
| **指令系统** | 复杂，指令数量多 | 精简，指令数量少 |
| **指令长度** | 可变 | 固定 |
| **寻址方式** | 丰富 | 较少 |
| **访存指令** | 所有指令均可访存 | **只有Load/Store指令可访存** |
| **通用寄存器** | 数量较少 | **数量多** |
| **控制方式** | **微程序控制**为主 | **硬布线控制**为主 |
| **时钟周期** | 指令周期长，CPI≥1 | 指令周期短，**追求CPI=1** |
| **目标** | 优化目标代码 | 优化编译器 |

---

### **四、 X86汇编基础（了解性内容）**

408对X86汇编有要求，但一般不深入。需要了解：
*   寄存器名称：EAX, EBX, ECX, EDX, ESI, EDI, ESP, EBP。
*   常用指令类型：
    *   数据传送：`MOV`, `PUSH`, `POP`
    *   算术运算：`ADD`, `SUB`, `MUL`, `DIV`
    *   逻辑运算：`AND`, `OR`, `NOT`
    *   控制转移：`JMP`, `JZ`, `CALL`, `RET`
*   能够阅读简单的汇编代码片段，理解其功能（如实现if-else, for循环等）。

---

### **总结：重难点与备考策略**

1.  **核心理解与辨析**：
    *   **四种指令格式**的特点，尤其是一地址指令。
    *   **所有数据寻址方式**的有效地址计算、特点、应用场景和**访存次数**。
    *   **基址寻址与变址寻址**的根本区别。
    *   **CISC与RISC**的核心思想与全面对比。

2.  **必考题型**：
    *   **选择题**：直接考查以上所有基本概念和辨析。
    *   **综合应用题**：
        *   给定指令系统和寻址方式说明，分析某条指令的**执行过程**和**访存次数**。
        *   与**第五章CPU**结合，考查指令周期、数据通路。
        *   阅读**X86汇编代码片段**，分析其功能（如求数组和、找最大值等）。

**备考建议**：
*   **死记硬背无效**：必须理解每种寻址方式背后的**设计目的**（为什么需要它？解决了什么问题？）。
*   **动手练习**：找一些经典的汇编程序片段，自己画图分析每条指令的操作数来源和去向，计算有效地址。
*   **融会贯通**：将本章的“指令”与下一章的“CPU数据通路”和“控制器”联系起来，理解一条指令是如何在CPU内部被一步步执行完成的。这是组成原理学习的最高境界。
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTIxMDg2Mjg4NzVdfQ==
-->